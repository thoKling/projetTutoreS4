(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"2yxt":function(e,t,n){"use strict";n.r(t),n.d(t,"ChatModule",function(){return I});var s=n("ofXK"),r=n("tyNb"),o=n("fXoL");let c=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Fb({type:e,selectors:[["app-chat"]],decls:1,vars:0,template:function(e,t){1&e&&o.Mb(0,"router-outlet")},directives:[r.e],styles:[""]}),e})();var i=n("E4M5"),a=n("HabH"),u=n("MutI"),l=n("3Pt+");function b(e,t){if(1&e&&(o.Qb(0,"mat-list-item"),o.qc(1),o.Pb()),2&e){const e=t.$implicit;o.Bb(1),o.sc(" ",e.message," ")}}function d(e,t){if(1&e&&(o.Qb(0,"ul"),o.Qb(1,"li"),o.Qb(2,"a",2),o.Qb(3,"div",3),o.Mb(4,"span",4),o.Qb(5,"span",5),o.qc(6),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb()),2&e){const e=t.$implicit,n=o.Zb();o.Bb(2),o.fc("routerLink","/chat/chatTo/",n.getUserId(e),""),o.Bb(2),o.ec("ngClass",e.status),o.Bb(2),o.sc(" ",e.name," ")}}const g=[{path:"",component:c,children:[{path:"chatTo/:id",component:(()=>{class e{constructor(e,t,n){this.route=e,this.messageService=t,this.userService=n,this.messageToSend="",this.chatMessages=[],this.receiverId="",this.senderId=""}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e?(this.receiverId=e,this.senderId=this.userService.getCurrentUserId(),this.refreshMessages(),this.messageService.currentComponent=this):console.log("TODO: erreur",e)}refreshMessages(){this.messageService.getMessageWithUser(this.receiverId).subscribe(e=>{this.chatMessages=e,console.log(e)})}send(){this.messageService.send({message:this.messageToSend,receiverId:this.receiverId,senderId:this.senderId}).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(r.a),o.Lb(i.a),o.Lb(a.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["app-chat-to"]],decls:5,vars:2,consts:[[4,"ngFor","ngForOf"],[1,"chatInput",3,"ngModel","ngModelChange"],[1,"chatButton",3,"click"]],template:function(e,t){1&e&&(o.Qb(0,"mat-nav-list"),o.pc(1,b,2,1,"mat-list-item",0),o.Pb(),o.Qb(2,"input",1),o.Xb("ngModelChange",function(e){return t.messageToSend=e}),o.Pb(),o.Qb(3,"button",2),o.Xb("click",function(){return t.send()}),o.qc(4,"Envoyer"),o.Pb()),2&e&&(o.Bb(1),o.ec("ngForOf",t.chatMessages),o.Bb(1),o.ec("ngModel",t.messageToSend))},directives:[u.c,s.j,l.a,l.f,l.h,u.a],styles:[".chatButton[_ngcontent-%COMP%]{flex:1;padding:8px 24px;font-size:1.3em;font-family:Droid Sans,sans-serif;background-color:#2a2845;color:#fff;transition:.2s ease-out;min-width:50px;margin-left:10%}.chatButton[_ngcontent-%COMP%]:hover{background-color:#444}.chatInput[_ngcontent-%COMP%]{flex:10;font-size:1.3em;font-family:Open Sans,sans-serif;background-color:#eee;color:#000;transition:.1s ease-out;padding-left:80px;margin-left:2%}.chatInput[_ngcontent-%COMP%]:focus{background-color:#e4f1fe;color:#222;transition:.2s ease-in}"]}),e})()},{path:"list",component:(()=>{class e{constructor(e){this.userService=e,this.users=[]}ngOnInit(){this.userService.getUserList().subscribe(e=>{this.users=e,console.log(this.users)})}getUserId(e){return this.userService.parseUserId(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(a.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["app-chat-list"]],decls:5,vars:1,consts:[[1,"title"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"userItem"],[1,"status",3,"ngClass"],[1,"userName"]],template:function(e,t){1&e&&(o.Qb(0,"div",0),o.Qb(1,"h3"),o.qc(2,"Lancer une conversation avec :"),o.Pb(),o.Pb(),o.Ob(3),o.pc(4,d,7,3,"ul",1),o.Nb()),2&e&&(o.Bb(4),o.ec("ngForOf",t.users))},directives:[s.j,r.c,s.i],styles:[".title[_ngcontent-%COMP%]{margin-bottom:15px;margin-left:2.5%}.userItem[_ngcontent-%COMP%]{height:auto;padding:10px;width:90%;margin-top:10px;border-radius:1px;align-items:flex-start;background-color:#201835;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);color:#a098a5;border-radius:8px;transition:.2s ease-in}.userItem[_ngcontent-%COMP%]:hover{background-color:#453968;color:#ddd;transition:.1s ease-in}.online[_ngcontent-%COMP%]{background-color:#0fa}.busy[_ngcontent-%COMP%]{background-color:#fb0}.offline[_ngcontent-%COMP%]{background-color:#888}.status[_ngcontent-%COMP%]{border:1px solid #000;min-width:10px;min-height:10px;border-radius:50%;margin:10px 12px 0 10px}.status[_ngcontent-%COMP%], .userName[_ngcontent-%COMP%]{display:inline-block}"]}),e})()},{path:"",redirectTo:"list",pathMatch:"full"}]}];let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({imports:[[r.d.forChild(g)],r.d]}),e})();var h=n("kmnG"),f=n("nLfN");n("8LU1"),n("EY2u"),n("XNiG"),n("xgIS"),n("3UWI"),n("1G5W");let m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({imports:[[f.b]]}),e})();var v=n("FKr1");let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({providers:[v.a],imports:[[m,h.c,v.b],m,h.c]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({imports:[[s.c,p,h.c,m,M,l.c,u.b]]}),e})()}}]);